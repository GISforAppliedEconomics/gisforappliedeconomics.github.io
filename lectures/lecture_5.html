<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<!-- Titles and author for Metadata -->
	<title>GIS for Applied Economics</title>
	<meta name="description" content="GIS for Applied Economics">
	<meta name="author" content="Juan Carlos Muñoz-Mora">

	<!-- Options for screen -->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<!-- Templates -->
	<link rel="stylesheet" href="reveal.js/css/reveal.css">
	<link rel="stylesheet" href="reveal.js/css/theme/white.css" id="theme">
	<link rel="stylesheet" href="reveal.js-own-style/print.css"  type="text/css" media="print">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">
	<!--[if lt IE 9]>
	<script src="reveal.js/lib/js/html5shiv.js"></script>
	<![endif]-->
	<script async defer src="https://buttons.github.io/buttons.js"></script>
	</head>

	<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->
	<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->
	<!-- 				Content 					-->
	<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->
	<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->

	<body>
		<div class="reveal">
			<div class="slides">
			<!-- START SLIDES -->
			<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->
			<!-- 				Slide 1	 -- Title			-->
			<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->

<!-- Section 1: General Introduction  -->
<section data-markdown  data-separator="^\n===\n" data-separator-vertical="^\n---\n" >
<script type="text/template">

# GIS for Applied Economics #
<br>

### Introduction to Network Analysis and Georeferencing
<br>

Juan Carlos Muñoz-Mora <br>
Univeristat Pompeu Fabra
<br>
[juancarlos.munoz@upf.edu](mailto:juancarlos.munoz@upf.edu)
<br> 
Nov 2016


===

# Roadmap #

1. Network Analysis
2. Networks Analysis in economic research (an example)
4. Georeferencing (Making your own map)
5. Georeferencing in action 
6. Final Practice

===

# Network Analysis

---

# Why important for applied economics?

- Real measure of distance, neighborhood,...
- Spill-Over effect (diffusion)
- Social Network

---

# Basic Concepts (I)

A network is a collection of elements and their inter-relations [(Kolaczyk, R, 2009)](http://www.springer.com/us/book/9780387881454)<!-- .element target="_blank" -->

<blockquote class="fragment fade-in">
<small>
![QGIS_1](inputs/lecture_5/network_definition.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->
</small>
</blockquote>

---

German Road Network and Large Citis (i.e. > 10,000 people)

![QGIS_1](inputs/lecture_5/road_network.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->

---

# Basic Concepts (II)

- Type of networks: directed graph, undirected graph

![QGIS_1](inputs/lecture_5/exp_1.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->

---

# Basic Concepts (III)

- Neighboorhood: set of nodes which node (i) has link
- Degree: Number of set where they a directly connected to
- Walk: A sequences of nodes in which two nodes have a link between them.
- Shortest Path (geodesic∫ distance): is the length of the shorthest patch between two nodes

Other important concepts (clustering, centrality,...)

===

# Network Analysis in Applied Economics

---

## [Trafficking Networks and the Mexican Drug War](https://www.aeaweb.org/articles?id=10.1257/aer.20121637)

American Economic Review. 2015;105 (6) :1738-1779.

---

This study examines the direct and spillover effects of Mexican policy led by conservative party (PAN) towards the drug trade.

### Empirical Strategy

Regression Discontinuity Design
- Different between PAN losses by a wide margin
- PAN wins by a large margin

### Results

Drug-related violence increases substantially after close elections of conservative party mayors.

$\rightarrow$ drug traffickers violence (re-allocation)

---

Drug-related homicides RD figures

![QGIS_1](inputs/lecture_5/dell_3.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->


---

Road network and Predicted Trafficking Routes

![QGIS_1](inputs/lecture_5/dell_1.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->

---

Illustration of Spillovers Methodology

![QGIS_1](inputs/lecture_5/dell_2.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->

===

# Geo-referecing 

Crating your own maps

---

### Archive Maps

Spanish Kingdoms 1030

![QGIS_1](inputs/lecture_5/spanish_kingdoms_1030.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:600px; float: center;" -->

<small>Source: [ Freeman's Historical Geography, Edited by J.B. Bury, Longmans Green and Co. Third Edition 1903](https://www.lib.utexas.edu/maps/historical/spanish_kingdoms.html)<!-- .element target="_blank" --> </small>

---

### Be careful!

![QGIS_1](inputs/lecture_5/maps_wrong.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->

<small>Source: [ The Economists](https://www.1843magazine.com/culture/the-daily/mistaken-maps) </small>


---

### Aerial pictures
Warsarw Before, During and After WWII

![QGIS_1](inputs/lecture_5/aerial_warsarw.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->

<small>Source: [ The Economists](https://www.1843magazine.com/culture/the-daily/mistaken-maps) </small>

---

### Own Collection

![QGIS_1](inputs/lecture_5/lsms_plot_1.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:400px; float: left;" -->

![QGIS_1](inputs/lecture_5/lsms_plot_2.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:400px; float: right;" -->

<small>Source: [LSMS-ISA](http://econ.worldbank.org/WBSITE/EXTERNAL/EXTDEC/EXTRESEARCH/EXTLSMS/0,,contentMDK:23512006~pagePK:64168445~piPK:64168309~theSitePK:3358997,00.html) </small>

---

## Georeferencing Desktop Solution (recommended!)

### Basic Definition
- Geo-located an image <!-- .element class="fragment" data-fragment-index="1" -->
	- Using parallels<!-- .element class="fragment" data-fragment-index="1" -->
	- Reference Points<!-- .element class="fragment" data-fragment-index="1" -->
	- Other information<!-- .element class="fragment" data-fragment-index="1" -->
	- Output?<!-- .element class="fragment" data-fragment-index="1" -->
- Once geo-refenced<!-- .element class="fragment" data-fragment-index="2" -->
	- Create polygons,points (output?) <!-- .element class="fragment" data-fragment-index="2" -->
	- Machine Learning Techniques - Classification (output?) <!-- .element class="fragment" data-fragment-index="2" -->
	- Visualization <!-- .element class="fragment" data-fragment-index="2" -->

---

## Step 1: Georeferencing in QGIS 

- Plug-in: Georeferencer-GDAL(!)

Basic Steps: <!-- .element class="fragment" data-fragment-index="1" -->
- Image <!-- .element class="fragment" data-fragment-index="1" -->
- Set CRS<!-- .element class="fragment" data-fragment-index="1" -->
- Insert Reference Points<!-- .element class="fragment" data-fragment-index="1" -->
- Transformation<!-- .element class="fragment" data-fragment-index="1" -->

---

## Step 2: Generating a vector
(editing )

Import!
- Check geometries
	- Geometry Checker (plug-in)
- Optimize polygons
	- PolygonSimplifier (plug-in)

[Have a look to the geo-referencing tools in ArcGIS as well](http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Georeferencing_a_raster_dataset)

---

### Can we do it directly in python?

Yes, yet different solutions<!-- .element class="fragment" data-fragment-index="1" -->

Some nice packages for doing this<!-- .element class="fragment" data-fragment-index="1" -->
- pystretch: manipulate images larger than your RAM<!-- .element class="fragment" data-fragment-index="1" -->
- gdal<!-- .element class="fragment" data-fragment-index="1" --> 

When can I consider this solution?<!-- .element class="fragment" data-fragment-index="1" -->
- Several pictures with the same source and location<!-- .element class="fragment" data-fragment-index="1" -->
- Automatize geo-referencing <!-- .element class="fragment" data-fragment-index="1" -->

===

# Geo-referencing in action

---

## [The Long-term Effects of Africa's Slave Trades](http://qje.oxfordjournals.org/content/123/1/139.short)<!-- .element target="_blank" -->

Nathan Nunn

The Quarterly Journal of Economics (2008) 123 (1): 139-176.

(GIS strategy replication)

---

## The paper

Can part of Africa's current underdevelopment be explained by its slave trades?

## Data

Slaves exported from each country

- from each port of Africa
- Ethnicity of a sample of 100,00+ slaves
- Ethnic homeland in Africa

---

## Reduced Form

$y_{i} = \alpha + \beta \ln(\frac{export_i}{area_i})+X'_i+\varepsilon_i$

<table border="0" width="100%">
<tr>
<td style="text-align: center">$y_{i}$</td>
<td>GDP per capita in country $i$ in 2000</td>
</tr>
<tr>
<td style="text-align: center">$exports_i$</td>
<td># of slaves exported 1400-1900 from country $i$</td>
</tr>
<tr>
<td style="text-align: center">$area_i$</td>
<td>Land surface area of country $i$</td>
</tr>
<tr>
<td style="text-align: center">$X'_i$</td>
<td>Controls</td>
</tr>
</table>


---

## [The Value of Democracy: Evidence from Road Building in Kenya](https://www.aeaweb.org/research/can-democracy-combat-ethnic-favoritism.php)<!-- .element target="_blank" -->

Robin Burgess, Remi Jedwab, Edward Miguel, Ameet Morjaria, Gerard Padró i Miquel

The Quarterly Journal of Economics (2012) 127 (4): 1707-1754

---

Ethnic favoritism using data on road building in Kenyan districts across the 1963–2011 period

## Empirical requirements

- Track road network expansion over time
- Baseline information on road maps<!-- .element class="fragment" data-fragment-index="1" -->
	- Digitize Michelin maps for Kenya since 1961<!-- .element class="fragment" data-fragment-index="1" -->

---
Michelin Road Map for Liberia in 1965 (example)

![QGIS_1](inputs/lecture_5/Michelin_Guides.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: right;" -->

---

Michelin Road Map for Africa - 1960

![QGIS_1](inputs/lecture_5/roads_michelin_1960.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: right;" -->

---

Michelin Road Map for Africa - 1980

![QGIS_1](inputs/lecture_5/roads_michelin_1980.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: right;" -->

---

Michelin Road Map for Africa - 1990

![QGIS_1](inputs/lecture_5/roads_michelin_1990.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: right;" -->

---

Michelin Road Map for Africa - 2000

![QGIS_1](inputs/lecture_5/roads_michelin_2000.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: right;" -->

---

Michelin Road Map for Africa - 2010

![QGIS_1](inputs/lecture_5/roads_michelin_2010.png)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: right;" -->

---

### Main Results

![QGIS_1](inputs/lecture_5/Kenia_road_results.png)

---

## [Railroads and American Economic Growth: a “Market Access” Approach](http://scholar.harvard.edu/files/hornbeck/files/railroads_dh_jan2015.pdf)<!-- .element target="_blank" -->

Dave Donaldson and Richard Hornbeck.

Quarterly Journal of Economics, 131(2):799-858, 2016.

(please have a look!)


===

# Final Practice

---

## General Question

Is the current development (luminosity 2013) in current Spanish communities   correlated with the former political division from Spanish Kingdoms 1210

---

## Spanish Kingdoms 1210

![QGIS_1](inputs/lecture_5/spanish_kingdoms_1210.jpg)<!-- .element style="border: none; background: none; box-shadow:none; width:800px; float: center;" -->

<small>Source: [ Freeman's Historical Geography, Edited by J.B. Bury, Longmans Green and Co. Third Edition 1903](https://www.lib.utexas.edu/maps/historical/spanish_kingdoms.html)<!-- .element target="_blank" --> </small>

---

## The Practice (Road Map)

1. Geo-reference the archived map
2. Create a new vector with this polygons
3. Get only Spanish territory 
4. Attached to the current communities their correspondent Spanish Kingdoms
5. Get the sum of the total Nightlight 
6. Present results visually
7. Get the mean test by Spanish Kingdoms
8. Present the results in a map

</script>
</section>



<!-- END SLIDES -->
		</div>
	</div>

<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->
<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->
<!-- 				Scripts Options				-->
<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->
<!-- ...  ...  ...  ... ... ... ... ... .. .. ..-->


	<!-- Basic Scripts Set Up -->
	<script src="reveal.js/lib/js/head.min.js"></script>
	<script src="reveal.js/js/reveal.js"></script>

	<!-- Basic Scripts Set Up -->
	<script>
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				// Display controls in the bottom right corner
				controls: true,
				// Display a presentation progress bar
				progress: true,
				// Push each slide change to the browser history
				history: true,
				center: true,
				mouseWheel: true,
				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // none/fade/slide/convex/concave/zoom 
			    //  Add annotation into the board
			    chalkboard: { // font-awesome.min.css must be available
					src: "chalkboard/chalkboard.json",
					toggleChalkboardButton: { left: "80px" },
					toggleNotesButton: { left: "130px" },
    			},
    			math: {
					// mathjax: 'http://cdn.mathjax.org/mathjax/latest/MathJax.js',
					config: 'TeX-AMS_HTML-full'
				},
				menu: { // Menu works best with font-awesome installed: sudo apt-get install fonts-font-awesome
					themes: false,
					transitions: false,
					markers: true,
					hideMissingTitles: true,
					custom: [
				            { title: 'Plugins', icon: '<i class="fa fa-external-link"></i>', src: 'toc.html' },
				            { title: 'About', icon: '<i class="fa fa-info"></i>', src: 'about.html' }
				        ]
				},
				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // none/fade/slide/convex/concave/zoom

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					// For Markdown Codes
					{ src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal.js/plugin/math/math.js', async: true },
					{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },		
					{ src: 'reveal.js-plugins/menu/menu.js' },
					{ src: 'reveal.js-plugins/chalkboard/chalkboard.js' },
				],
				keyboard: {
			        67: function() { RevealChalkboard.toggleNotesCanvas() },    // toggle notes canvas when 'c' is pressed
			        66: function() { RevealChalkboard.toggleChalkboard() }, // toggle chalkboard when 'b' is pressed
			        46: function() { RevealChalkboard.clear() },    // clear chalkboard when 'DEL' is pressed
			         8: function() { RevealChalkboard.reset() },    // reset chalkboard data on current slide when 'BACKSPACE' is pressed
			        68: function() { RevealChalkboard.download() }, // downlad recorded chalkboard drawing when 'd' is pressed
    			
    			},

			});
	</script>

</body>
</html>
